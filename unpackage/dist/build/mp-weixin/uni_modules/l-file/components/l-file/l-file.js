(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/l-file/components/l-file/l-file"],{"069e":function(e,t,o){},2346:function(e,t,o){"use strict";(function(e){function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){if(null==e)return{};var o,n,a=s(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}function s(e,t){if(null==e)return{};var o,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){o.e("uni_modules/l-file/components/l-file/h5-file").then(function(){return resolve(o("5178"))}.bind(null,o)).catch(o.oe)},u={components:{h5File:l},props:{logo:{type:String,default:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F00%2F00%2F07%2F155788a6d8a5c42.jpg&refer=http%3A%2F%2Fbpic.588ku.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1619847627&t=2da40b583002205c204d980b54b35040"},top:{type:String,default:"auto"},bgColor:{type:String,default:"rgba(49, 126, 243, 0.5)"},color:{type:String,default:"#55aa00"}},data:function(){return this.uploadTask=null,this.downloadTask=null,{cubgColor:"",loading:!1,value:5,show:!1,msg:"执行完毕~",showH5:!1,showTip:!1}},methods:{toast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.duration,a=void 0===n?2e3:n,i=o.icon,r=void 0===i?"none":i;e.showToast({title:t,duration:a,icon:r})},getRequest:function(e){var t=new Object,o=e.indexOf("?");if(-1!=o)for(var n=e.substring(o+1),a=n.split("&"),i=0;i<a.length;i++)t[a[i].split("=")[0]]=unescape(a[i].split("=")[1]);return t},appChooseFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.currentWebview,e.url,e.name,e.header,e.addName,e.addSize,e.maxSize,r(e,["currentWebview","url","name","header","addName","addSize","maxSize"])},wxChooseFile:function(t){var o=this,n=t.maxSize,a=void 0===n?10:n,i=r(t,["maxSize"]);console.log("进入微信调试工具"),wx.chooseMessageFile({count:1,success:function(t){var n=t.tempFiles;o.setdefUI();var r=n[0];if(r.size>1048576*Math.abs(a))return e.showToast({title:"单个文件请勿超过".concat(a,"M,请重新上传"),icon:"none"}),o.errorHandler("文件选择失败",o.upErr);o.handleWXUpload(i,r)},fail:function(){return o.errorHandler("文件选择失败",o.upErr)}})},h5ChooseFile:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o.maxSize,a=void 0===n?10:n,i=r(o,["maxSize"]);this.showH5=!0,this.value=0,this.$nextTick((function(){t.$refs.h5File.hFile.onchange=function(o){var n=o.target.files[0];n.size>1048576*Math.abs(a)?e.showToast({title:"单个文件请勿超过".concat(a,"M,请重新上传"),icon:"none"}):t.handleH5Upload(i,n)}}))},handleH5Upload:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.url,n=t.name,a=void 0===n?"file":n,i=t.header,s=t.addName,l=t.addSize,u=r(t,["url","name","header","addName","addSize"]),d=arguments.length>1?arguments[1]:void 0,c=d.name,f=new FormData;for(var h in u)f.append(h,u[h]);for(var p in s&&f.append(s,c),l&&f.append(l,d.size),f.append(a,d),this.uploadTask=new XMLHttpRequest,this.uploadTask.open("POST",o,!0),i)this.uploadTask.setRequestHeader(p,i[p]);this.uploadTask.ontimeout=function(){setTimeout((function(){return e.showTip=!1,e.errorHandler("请求超时",e.upErr)}),1e3)},this.uploadTask.upload.addEventListener("progress",(function(t){t.lengthComputable&&(e.value=Math.ceil(100*t.loaded/t.total),e.value>100&&(e.value=100),e.$forceUpdate())}),!1),this.uploadTask.onreadystatechange=function(t){if(4==e.uploadTask.readyState)return console.log("status："+e.uploadTask.status),200==e.uploadTask.status?e.handleBack(c,e.uploadTask.responseText,d.size):(e.showTip=!1,0==e.uploadTask.status&&console.log("请检查请求头Content-Type与服务端是否匹配，并确认服务端已正确开启跨域"),e.errorHandler("文件上传失败",e.upErr))},this.showTip=!0,this.uploadTask.send(f)},handleWXUpload:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o.url,a=o.name,i=void 0===a?"file":a,s=o.header,l=o.addName,u=o.addSize,d=r(o,["url","name","header","addName","addSize"]),c=arguments.length>1?arguments[1]:void 0,f={url:n,name:i,formData:d,header:s,filePath:c.path};l&&(f.formData[l]=c.name),u&&(f.formData[u]=c.size);var h=c.name;f["fail"]=function(e){return t.showTip=!1,t.errorHandler("文件上传失败",t.upErr)},f["success"]=function(e){if(200==e.statusCode){var o=JSON.parse(e.data);return t.onCommit(t.$emit("up-success",{fileName:h,size:c.size,data:o}))}return t.errorHandler("文件上传失败",t.upErr)},this.showTip=!0,this.uploadTask=e.uploadFile(f),this.uploadTask&&this.uploadTask.onProgressUpdate((function(e){var o=e.progress,n=void 0===o?0:o;n<=100&&(t.value=n,t.$forceUpdate())}))},onCloseH5:function(){this.showH5=!1},onAbort:function(){this.uploadTask&&this.uploadTask.abort(),this.showTip=!1},downOnAbort:function(){this.downloadTask&&this.downloadTask.abort(),this.onCommit(!1,"已取消")},handleBack:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{}",o=arguments.length>2?arguments[2]:void 0;console.log("可根据需求自行修改emit内容，服务端返回："+t);try{t=JSON.parse(t)}catch(n){console.log("Tips: responseText are not JSON")}return this.onCommit(this.$emit("up-success",{statusCode:200,fileName:e,size:o,data:t}))},upload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.url){if(!this.loading)return this.wxChooseFile(e);this.toast("还有个文件玩命处理中，请稍候..")}else this.toast("上传地址不正确")},open:function(t){var o=e.getSystemInfoSync().platform;"ios"==o&&(t=encodeURI(t)),e.openDocument({filePath:t,success:function(e){console.log("打开文档成功")}})},plusSaveFile:function(e){var t=this,o=e.url,n=e.customName,i=void 0===n?"":n,r=e.opt;return new Promise((function(e,n){var s={method:"GET",timeout:120,retryInterval:10,filename:"file://storage/emulated/0/lFile/"+i};s=a(a({},s),r),t.downloadTask=plus.downloader.createDownload(o,s,(function(o,a){if(200==a){var i=o.filename;t.value=100,t.onCommit(e(i))}else t.errorHandler("下载失败",n);t.downloadTask=null})),t.downloadTask.addEventListener("statechanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.downloadedSize,n=void 0===o?0:o,a=e.state,i=void 0===a?0:a,r=e.totalSize,s=void 0===r?0:r;if(3===i){var l=s>0?s:fileSize,u=Math.ceil(n/l*100);t.value=u>100?100:u,t.$forceUpdate()}}),!1),t.downloadTask.start()}))},download:function(t){var o=this,n=t.url,i=t.type,s=void 0===i?"temporary":i,l=(t.customName,r(t,["url","type","customName"]));if(!this.loading)return this.setdefUI(),new Promise((function(t,i){n=encodeURI(n),o.downloadTask=e.downloadFile(a(a({url:n},l),{},{success:function(n){var a=n.statusCode,r=n.tempFilePath;200===a&&("save"==s?e.saveFile({tempFilePath:r,success:function(e){var n=e.savedFilePath;return o.onCommit(t(n))},fail:function(){return o.errorHandler("下载失败",i)}}):o.onCommit(t(r)))},fail:function(){return o.errorHandler("下载失败",i)}})),o.downloadTask.onProgressUpdate((function(e){var t=e.progress,n=void 0===t?0:t;n<=100&&(o.value=n,o.$forceUpdate())}))}));this.toast("还有个文件玩命处理中，请稍候..")},onCommit:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"执行完毕~";return this.msg=o,this.loading=!1,this.showTip=!1,this.cubgColor="rgba(57, 181, 74, 0.5)",this.uploadTask=null,this.downloadTask=null,setTimeout((function(){t.show=!1,t.showH5=!1}),1500),e},setdefUI:function(){this.cubgColor=this.bgColor,this.value=0,this.loading=!0,this.show=!0},upErr:function(e){this.$emit("up-error",e)},errorHandler:function(e,t){var o=this;return this.msg=e,this.loading=!1,this.cubgColor="rgba(229, 77, 66, 0.5)",this.uploadTask=null,this.downloadTask=null,setTimeout((function(){o.show=!1}),1500),t(e)}}};t.default=u}).call(this,o("543d")["default"])},"896a":function(e,t,o){"use strict";var n;o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"9be5":function(e,t,o){"use strict";o.r(t);var n=o("896a"),a=o("ec01");for(var i in a)"default"!==i&&function(e){o.d(t,e,(function(){return a[e]}))}(i);o("cb92");var r,s=o("f0c5"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"5db0e3aa",null,!1,n["a"],r);t["default"]=l.exports},cb92:function(e,t,o){"use strict";var n=o("069e"),a=o.n(n);a.a},ec01:function(e,t,o){"use strict";o.r(t);var n=o("2346"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/l-file/components/l-file/l-file-create-component',
    {
        'uni_modules/l-file/components/l-file/l-file-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("9be5"))
        })
    },
    [['uni_modules/l-file/components/l-file/l-file-create-component']]
]);
